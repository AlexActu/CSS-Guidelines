!function(e,t,n){"use strict";Foundation.libs.section={name:"section",version:"4.3.2",settings:{deep_linking:!1,one_up:!0,multi_expand:!1,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",resized_data_attr:"data-section-resized",small_style_data_attr:"data-section-small-style",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',active_class:"active",callback:function(){}},init:function(t,n,i){var r=this;return Foundation.inherit(this,"throttle data_options position_right offset_right"),"object"==typeof n&&e.extend(!0,r.settings,n),"string"!=typeof n?(this.events(),!0):this[n].call(this,i)},events:function(){for(var i=this,r=[],o=i.settings.section_selector,s=i.settings.region_selector.split(","),a=i.settings.title_selector.split(","),c=0,l=s.length;l>c;c++)for(var u=s[c],f=0,d=a.length;d>f;f++){var p=o+">"+u+">"+a[f];r.push(p+" a"),r.push(p)}e(i.scope).on("click.fndtn.section",r.join(","),function(t){var n=e(this).closest(i.settings.title_selector);i.close_navs(n),n.siblings(i.settings.content_selector).length>0&&i.toggle_active.call(n[0],t)}),e(t).on("resize.fndtn.section",i.throttle(function(){i.resize()},30)).on("hashchange.fndtn.section",i.set_active_from_hash),e(n).on("click.fndtn.section",function(t){t.isPropagationStopped&&t.isPropagationStopped()||t.target!==n&&i.close_navs(e(t.target).closest(i.settings.title_selector))}),e(t).triggerHandler("resize.fndtn.section"),e(t).triggerHandler("hashchange.fndtn.section")},close_navs:function(t){var n=Foundation.libs.section,i=e(n.settings.nav_selector).filter(function(){return!e.extend({},n.settings,n.data_options(e(this))).one_up});if(t.length>0){var r=t.parent().parent();(n.is_horizontal_nav(r)||n.is_vertical_nav(r))&&(i=i.filter(function(){return this!==r[0]}))}i.children(n.settings.region_selector).removeClass(n.settings.active_class)},toggle_active:function(t){var n=e(this),i=Foundation.libs.section,r=n.parent(),o=n.siblings(i.settings.content_selector),s=r.parent(),a=e.extend({},i.settings,i.data_options(s)),c=s.children(i.settings.region_selector).filter("."+i.settings.active_class);!a.deep_linking&&o.length>0&&t.preventDefault(),t.stopPropagation(),r.hasClass(i.settings.active_class)?(r.hasClass(i.settings.active_class)&&i.is_accordion(s)||!a.one_up&&(i.small(s)||i.is_vertical_nav(s)||i.is_horizontal_nav(s)||i.is_accordion(s)))&&(r.removeClass(i.settings.active_class),r.trigger("closed.fndtn.section")):((!i.is_accordion(s)||i.is_accordion(s)&&!i.settings.multi_expand)&&(c.removeClass(i.settings.active_class),c.trigger("closed.fndtn.section")),r.addClass(i.settings.active_class),i.resize(r.find(i.settings.section_selector).not("["+i.settings.resized_data_attr+"]"),!0),r.trigger("opened.fndtn.section")),a.callback(s)},check_resize_timer:null,resize:function(t,n){var i=Foundation.libs.section,r=e(i.settings.section_selector),o=i.small(r),s=function(e,t){return!(i.is_accordion(e)||e.is("["+i.settings.resized_data_attr+"]")||o&&!i.is_horizontal_tabs(e)||t!==("none"===e.css("display")||!e.parent().is(":visible")))};t=t||e(i.settings.section_selector),clearTimeout(i.check_resize_timer),o||t.removeAttr(i.settings.small_style_data_attr),t.filter(function(){return s(e(this),!1)}).each(function(){var t=e(this),r=t.children(i.settings.region_selector),o=r.children(i.settings.title_selector),s=r.children(i.settings.content_selector),a=0;if(n&&0==t.children(i.settings.region_selector).filter("."+i.settings.active_class).length){var c=e.extend({},i.settings,i.data_options(t));c.deep_linking||!c.one_up&&(i.is_horizontal_nav(t)||i.is_vertical_nav(t)||i.is_accordion(t))||r.filter(":visible").first().addClass(i.settings.active_class)}if(i.is_horizontal_tabs(t)||i.is_auto(t)){var l=0;o.each(function(){var t=e(this);if(t.is(":visible")){t.css(i.rtl?"right":"left",l);var n=parseInt(t.css("border-"+(i.rtl?"left":"right")+"-width"),10);"Nan"===n.toString()&&(n=0),l+=i.outerWidth(t)-n,a=Math.max(a,i.outerHeight(t))}}),o.css("height",a),r.each(function(){var t=e(this),n=t.children(i.settings.content_selector),r=parseInt(n.css("border-top-width"),10);"Nan"===r.toString()&&(r=0),t.css("padding-top",a-r)}),t.css("min-height",a)}else if(i.is_horizontal_nav(t)){var u=!0;o.each(function(){a=Math.max(a,i.outerHeight(e(this)))}),r.each(function(){var n=e(this);n.css("margin-left","-"+(u?t:n.children(i.settings.title_selector)).css("border-left-width")),u=!1}),r.css("margin-top","-"+t.css("border-top-width")),o.css("height",a),s.css("top",a),t.css("min-height",a)}else if(i.is_vertical_tabs(t)){var f=0;o.each(function(){var t=e(this);if(t.is(":visible")){t.css("top",f);var n=parseInt(t.css("border-top-width"),10);"Nan"===n.toString()&&(n=0),f+=i.outerHeight(t)-n}}),s.css("min-height",f+1)}else if(i.is_vertical_nav(t)){var d=0,p=!0;o.each(function(){d=Math.max(d,i.outerWidth(e(this)))}),r.each(function(){var n=e(this);n.css("margin-top","-"+(p?t:n.children(i.settings.title_selector)).css("border-top-width")),p=!1}),o.css("width",d),s.css(i.rtl?"right":"left",d),t.css("width",d)}t.attr(i.settings.resized_data_attr,!0)}),e(i.settings.section_selector).filter(function(){return s(e(this),!0)}).length>0&&(i.check_resize_timer=setTimeout(function(){i.resize(t.filter(function(){return s(e(this),!1)}),!0)},700)),o&&t.attr(i.settings.small_style_data_attr,!0)},is_vertical_nav:function(e){return/vertical-nav/i.test(e.data("section"))},is_horizontal_nav:function(e){return/horizontal-nav/i.test(e.data("section"))},is_accordion:function(e){return/accordion/i.test(e.data("section"))},is_horizontal_tabs:function(e){return/^tabs$/i.test(e.data("section"))},is_vertical_tabs:function(e){return/vertical-tabs/i.test(e.data("section"))},is_auto:function(e){var t=e.data("section");return""===t||/auto/i.test(t)},set_active_from_hash:function(){var n,i=Foundation.libs.section,r=t.location.hash.substring(1),o=e(i.settings.section_selector);o.each(function(){var t=e(this),o=t.children(i.settings.region_selector);return o.each(function(){var o=e(this),s="^"+o.children(i.settings.content_selector).data("slug")+"$";return new RegExp(s,"i").test(r)?(n=t,!1):void 0}),null!=n?!1:void 0}),null!=n&&o.each(function(){if(n==e(this)){var t=e(this),o=e.extend({},i.settings,i.data_options(t)),s=t.children(i.settings.region_selector),a=o.deep_linking&&r.length>0,c=!1;s.each(function(){var t=e(this);if(c)t.removeClass(i.settings.active_class);else if(a){var n="^"+t.children(i.settings.content_selector).data("slug")+"$";n&&new RegExp(n,"i").test(r)?(t.hasClass(i.settings.active_class)||t.addClass(i.settings.active_class),c=!0):t.removeClass(i.settings.active_class)}else t.hasClass(i.settings.active_class)&&(c=!0)}),c||!o.one_up&&(i.is_horizontal_nav(t)||i.is_vertical_nav(t)||i.is_accordion(t))||s.filter(":visible").first().addClass(i.settings.active_class)}})},reflow:function(){var t=Foundation.libs.section;e(t.settings.section_selector).removeAttr(t.settings.resized_data_attr),t.throttle(function(){t.resize()},30)()},small:function(t){return e.extend({},this.settings,this.data_options(t)),this.is_horizontal_tabs(t)?!1:t&&this.is_accordion(t)?!0:e("html").hasClass("lt-ie9")?!0:e("html").hasClass("ie8compat")?!0:!matchMedia(Foundation.media_queries.small).matches},off:function(){e(this.scope).off(".fndtn.section"),e(t).off(".fndtn.section"),e(n).off(".fndtn.section")}},e.fn.reflow_section=function(e){var t=this,n=Foundation.libs.section;return t.removeAttr(n.settings.resized_data_attr),n.throttle(function(){n.resize(t,e)},30)(),this}}(Foundation.zj,window,document);